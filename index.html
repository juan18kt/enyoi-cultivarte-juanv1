<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Citas BarberÃ­a</title>
</head>
<body>

<h2>Reservar cita ðŸ’ˆ</h2>

<form id="formCita">
    <label>Nombre:</label><br>
    <input type="text" id="nombre" required><br><br>

    <label>Fecha:</label><br>
    <input type="date" id="fecha" required><br><br>

    <label>Hora disponible:</label><br>
    <select id="hora" required></select><br><br>

    <label>Servicio:</label><br>
    <select id="servicio" required>
        <option value="Corte">Corte</option>
        <option value="Barba">Barba</option>
        <option value="Corte y Barba">Corte y Barba</option>
    </select><br><br>

    <button type="submit">Reservar</button>
</form>

<script>
const horasBase = [
    "08:00","09:00","10:00","11:00",
    "12:00","14:00","15:00","16:00","17:00"
];

const fechaInput = document.getElementById("fecha");
const horaSelect = document.getElementById("hora");

fechaInput.addEventListener("change", cargarHoras);

function cargarHoras() {
    horaSelect.innerHTML = "";
    let citas = JSON.parse(localStorage.getItem("citas")) || [];
    let fechaSeleccionada = fechaInput.value;

    let horasOcupadas = citas
        .filter(c => c.fecha === fechaSeleccionada)
        .map(c => c.hora);

    horasBase.forEach(hora => {
        if (!horasOcupadas.includes(hora)) {
            let option = document.createElement("option");
            option.value = hora;
            option.textContent = hora;
            horaSelect.appendChild(option);
        }
    });

    if (horaSelect.innerHTML === "") {
        let option = document.createElement("option");
        option.textContent = "No hay horas disponibles";
        horaSelect.appendChild(option);
    }
}

document.getElementById("formCita").addEventListener("submit", function(e) {
    e.preventDefault();

    let cita = {
        nombre: document.getElementById("nombre").value,
        fecha: fechaInput.value,
        hora: horaSelect.value,
        servicio: document.getElementById("servicio").value
    };

    let citas = JSON.parse(localStorage.getItem("citas")) || [];
    citas.push(cita);
    localStorage.setItem("citas", JSON.stringify(citas));

    alert("Cita reservada con Ã©xito ðŸ’ˆ");
    this.reset();
    horaSelect.innerHTML = "";
});
</scri
